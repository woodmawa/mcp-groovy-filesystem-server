spring:
  application:
    name: mcp-groovy-filesystem-server
  main:
    web-application-type: ${MCP_WEB_TYPE:servlet}
  jackson:
    default-property-inclusion: non_null

mcp:
  mode: ${MCP_MODE:http}

  filesystem:
    # Allowed directories for file operations
    allowed-directories: C:/Users/willw/IdeaProjects,C:/Users/willw/claude
    max-file-size-mb: 10
    enable-write: true
    allow-symlinks: false

    # TOKEN OPTIMIZATION: Bounded result limits
    active-project-root: C:/Users/willw/IdeaProjects/mcp-groovy-filesystem-server
    
    # v0.0.4: Cross-platform workspace mapping for Linux paths from Claude.ai
    # Linux paths like /home/claude/file.md are mapped here
    # If not set, falls back to active-project-root
    claude-workspace-root: C:/Users/willw/claude
    max-list-results: 100
    max-search-results: 50
    max-search-matches-per-file: 10
    max-tree-depth: 5
    max-tree-files: 200
    max-read-multiple: 10
    max-line-length: 1000
    max-response-size-kb: 100

  # Script execution security settings
  script:
    max-memory-mb: 256
    max-threads: 10
    max-execution-time-seconds: 60
    max-script-length: 100000
    enable-dangerous-pattern-check: true
    enable-file-path-validation: true
    enable-audit-logging: true

    # Command whitelists - PERMISSIVE for normal operations
    whitelist:
      powershell-allowed:
        - '.*'  # Allow all - blocked list takes precedence

      powershell-blocked:
        - '.*Remove-Item.*'
        - '.*Clear-.*Content.*'
        - '.*Stop-Computer.*'
        - '.*Restart-Computer.*'
        - '.*Format-Volume.*'
        - '.*Invoke-Expression.*'
        - '.*Set-ExecutionPolicy.*'

      bash-allowed:
        - '.*'  # Allow all - blocked list takes precedence

      bash-blocked:
        - '.*rm .*'
        - '.*chmod.*'
        - '.*chown.*'
        - '.*sudo.*'
        - '.*shutdown.*'
        - '.*reboot.*'
        - '.*kill.*'

logging:
  level:
    root: INFO
    com.softwood.mcp: DEBUG

---
spring:
  config:
    activate:
      on-profile: stdio
  main:
    banner-mode: off
server:
  port: 0

mcp:
  mode: stdio

logging:
  level:
    root: INFO
    com.softwood.mcp: DEBUG
    org.springframework: WARN
    com.softwood.mcp.service.AuditService: INFO
